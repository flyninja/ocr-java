# ocr-java
Optical recognize playing cards images

## What's required?

Задача и требования:

- Дано множество картинок
- Необходимо написать программу на Java, которая распознает, какие карты лежат на столе (только по центру картинки). Например, на этой картинке https://i.gyazo.com/65658f6ab114de07d5c08d5f81324dc7.png на столе лежат карты 4hQd7s
- Тестирование программы будет осуществляться на аналогичных картинках, которых нет в исходном множестве
- Допускаются ошибки в распознавании не более 3% от общего количества распознанных карт
- Нельзя использовать готовые библиотеки для распознавания текста. Необходимо написать свой алгоритм распознавания карт
- На распознавание одного файла не должно уходить более 1 секунды
- Исходный код решения задачи не должен быть длиннее 500 строк с нормальным форматированием

- Программу нужно предоставить в виде, готовом к запуску на Windows десктопе. Файл run.bat параметром принимает путь до папки с картинками. В консоль распечатывается результат в виде "имя файла - карты" для всех файлов папки
- Программу нужно предоставить с исходными файлами
- В исходных файлах должен быть ВЕСЬ код, который был использован для решения задачи
- Программу нужно предоставить в виде ссылки на ZIP-файл. Ссылки на репозитории, например на github, не принимаются

Рекомендации:

- У автора этой задачи решение заняло 100 строк кода. У лучшего на данный момент кандидата - 160 строк. Ничего страшного, если ваше решение занимает 500 строк. Однако, если больше и это - не комментарии, то стоит задуматься

Для решения задачи рекомендуется использовать следующие функции, встроенные в Java:

- BufferedImage img = ImageIO.read(f); - зачитка картинки из файла
- ImageIO.write(img, "png", f); - запись картинки в файл
- img.getWidth(); img.getHeight(); - рамеры картинки
- BufferedImage img1 = img.getSubimage(x, y, w, h); - взятие области в картинке
- img.getRGB(x, y); - взятие цвета точки по координате
- Color c = new Color(img.getRGB(x, y)); c.getRed(); c.getGreen(); c.getBlue(); c.equals(c1) - работа с цветом точки


## What's done?

1. Попытка имплементации распознавания изображений с использованием YOLO-подобного предсказания с однослойным перцептроном в качестве движка по распознаванию масти и номинала карты.
2. Предсказание вхождения области в "карту" выполняется на основе количественной статистики бэкграунда.
3. Распознавание области "карты" по подсчету ширины-высоты бэкграунда вокруг ранее предсказанного блока.
4. Выделение областей масти и номинала внутри карты по заранее заданным координатам (ненадежно по причине рамок выделений, рендеринга оттенков границ изображений и т.п.).
5. Позиционирование изображения внутри выделенной области по центру - необходимо из-за неточности предыдущего шага.
6. Распознавание обученным персептроном выделенного изображения.

## How to deep-learn?

1. Необходимо использовать утилиту ImageHighLighter для визуализации выделяемых областей YOLO-подобным предсказателем.
2. Необходимо использовать утилиту ImageSplitParts для выделения изображений, обучающих персептрон.
3. Необходимо разложить результат работы шага 2 для использования при обучении по под-директориям с названиями-символами, которые необходимо распознать персептрону.
4. Необходимо использовать утилиту LearnTool для обучения персептрона под масти и номиналы по-отдельности.
5. Статистику по результатам обучения можно получить используя утилиту TestLearnStat.
6. результаты обучения в виде файлов suits.weights и hands.weights необходимо сохранить в ресурсы и собрать программу `mvn clean package`.

## How to use?

Запуск:

`java -jar ocr-java-0.1.1-SNAPSHOT.jar input/imgs`

аргумент - путь к директории с картинками, которые необходимо распознать.